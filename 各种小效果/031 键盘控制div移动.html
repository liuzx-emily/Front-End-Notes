<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>031 键盘控制div移动 </title>
    <style>
    body {
        width: 2000px;
        height: 1500px;
        margin: 0;
    }
    
    div {
        width: 50px;
        height: 50px;
        background-color: crimson;
        position: fixed;
        left: 0;
        top: 0;
    }
    </style>
</head>

<body>
    <div>战机666</div>
    <p></p>
    <script>
    var oDiv = document.querySelector('div');
    var json = {
        left: false,
        right: false,
        up: false,
        down: false
    };
    oDiv.timer = setInterval(function(key) {
        var L = parseInt(getComputedStyle(oDiv).left);
        var T = parseInt(getComputedStyle(oDiv).top);
        if (json.left) {
            L = L - 10;
        } else if (json.right) {
            L = L + 10;
        } else if (json.up) {
            T = T - 10;
        } else if (json.down) {
            T = T + 10;
        }
        if (L < 0) {
            L = 0;
        } else if (L > document.documentElement.clientWidth - oDiv.offsetWidth) {
            L = document.documentElement.clientWidth - oDiv.offsetWidth
        }
        if (T < 0) {
            T = 0;
        } else if (T > document.documentElement.clientHeight - oDiv.offsetHeight) {
            T = document.documentElement.clientHeight - oDiv.offsetHeight
        }
        oDiv.style.left = L + 'px';
        oDiv.style.top = T + 'px';
        document.title = L + ',' + T;
    }, 1000 / 60);
    document.onkeydown = function(ev) {
        switch (ev.keyCode) {
            case 38: //上
                json.up = true;
                return false;
            case 40: //下
                json.down = true;
                return false;
            case 37: //左
                json.left = true;
                return false;
            case 39: //右
                json.right = true;
                return false;
        }
    };
    document.onkeyup = function(ev) {
        switch (ev.keyCode) {
            case 38: //上
                json.up = false;
                break;
            case 40: //下
                json.down = false;
                break;
            case 37: //左
                json.left = false;
                break;
            case 39: //右
                json.right = false;
                break;
        }
    };
    </script>
</body>

</html>
