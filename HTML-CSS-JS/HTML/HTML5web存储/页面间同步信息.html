<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>页面间同步信息</title>
    <script>
    var aInput;
    window.onload = function() {
        aInput = document.querySelectorAll('input');
        restore();
        aInput[4].onclick = function() {
            if (aInput[0].value) {
                window.localStorage.setItem('nickname', aInput[0].value);
            }
            for (var i = 1; i < 4; i++) {
                if (aInput[i].checked) {
                    window.localStorage.setItem('hobby', aInput[i].id);
                }
            }
        };
        window.onstorage = function(ev) {
            alert('数据更新：' + ev.key + '由' + ev.oldValue + '变为' + ev.newValue);
            restore(ev.key, ev.newValue);
        };
    };

    function restore(key, value) {
        switch (key) {
            case 'nickname':
                aInput[0].value = value;
                break;
            case 'hobby':
                for (var i = 1; i < 4; i++) {
                    if (aInput[i].id === 'hobby') {
                        aInput[i].checked = true;
                        break;
                    }
                }
                break;
            default:
                break;
        }
    }
    </script>
</head>

<body>
    <input type="text" name="nickname">
    <br>
    <input type="radio" name="hobby" id="paint">
    <label for="paint">绘画</label>
    <input type="radio" name="hobby" id="jogging">
    <label for="jogging">慢跑</label>
    <input type="radio" name="hobby" id="pcGame">
    <label for="pcGame">电脑游戏</label>
    <br>
    <br>
    <input type="button" value="将已填信息保存到本地">
</body>

</html>
