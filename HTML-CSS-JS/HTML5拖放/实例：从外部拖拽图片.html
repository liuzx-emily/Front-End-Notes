<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>从外部拖拽图片</title>
    <style>
    div {
        width: 400px;
        font: 80px/200px '华文彩云';
        color: white;
        line-height: 200px;
        background-color: coral;
    }
    </style>
    <script>
    var oDiv = null;
    window.onload = function() {
        oDiv = document.querySelector('div');
        oDiv.ondragenter = function() {
            this.style.fontSize = '30px';
            this.innerText = '松手就能添加了！';
        };
        oDiv.ondragover = function(ev) {
            ev.preventDefault(); //这样才允许在oDiv上drop
        };
        oDiv.ondragleave = function() {
            this.style.fontSize = '80px';
            this.innerText = '哈哈哈hia';
        };
        oDiv.ondrop = function(ev) {
            this.style.fontSize = '80px';
            this.innerText = '哈哈哈hia';
            ev.preventDefault(); //阻止浏览器的默认操作：打开拖拽的文件
            var fs = ev.dataTransfer.files;
            add(fs);

        };

        function add(fs) {

            for (var i = 0; i < fs.length; i++) {
                if (/image/i.test(fs[i].type)) { //判断是不是图片
                    var fr = new FileReader();
                    fr.readAsDataURL(fs[i]);
                    fr.onload = function() {
                        var oImg = document.createElement('img');
                        oImg.src = this.result;
                        oImg.style.width = '80px';
                        document.body.appendChild(oImg);
                    };
                }
            }

        }
    };
    </script>
</head>

<body>
    <div>啦啦啦</div>
</body>

</html>
