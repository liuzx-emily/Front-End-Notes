<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>020 CSS3transform旋转导航</title>
    <style>
    section {
        position: fixed;
        top: 50px;
        right: 150px;
    }
    
    .btn {
        position: absolute;
        width: 20px;
        height: 20px;
        left: 0;
        top: 0;
        border-radius: 20%;
    }
    
    #bigBtn {
        position: absolute;
        width: 30px;
        height: 30px;
        background-color: coral;
        border-radius: 10% 10% 50% 50%;
        transition: 1s;
    }
    </style>
    <script>
    // 不知道为什么：transition=1s时：bug？？
    // "scale(1) rotate(360deg)" -> "scale(1) rotate(0deg)" -> "scale(1) rotate(360deg)"
    // 可以看出rotate的效果

    // "rotate(360deg)" -> "scale(1) rotate(0deg)" -> "rotate(360deg)"
    // 这两步，都看不出来rotate的任何变化
    window.onload = function() {
        //init
        var aBtn = document.querySelectorAll('.btn');
        var oBig = document.querySelector('#bigBtn');
        var r = 100;
        var aColor = ['crimson', 'aquamarine', 'darkslateblue', 'lightgreen'];
        for (var i = 0; i < aBtn.length; i++) {
            aBtn[i].style.backgroundColor = aColor[i % aColor.length];
        }
        //点击大方块，展开、收缩所有小块块
        oBig.onclick = function() {
            for (var i = 0; i < aBtn.length; i++) {
                aBtn[i].style.transition = 'all 1s ' + i / 10 + 's';
            }
            if (!oBig.zhanKai) {
                oBig.style.transform = "rotate(360deg)";
                for (var i = 0; i < aBtn.length; i++) {
                    var x = r * Math.cos(i * Math.PI / (aBtn.length - 1));
                    var y = r * Math.sin(i * Math.PI / (aBtn.length - 1));
                    aBtn[i].style.left = -x + 'px'; //如果用变换中的translate 每个变化中都要带着 太麻烦了
                    aBtn[i].style.top = y + 'px';
                    aBtn[i].style.transform = "scale(1) rotate(360deg)";
                }
                oBig.zhanKai = true;
            } else {
                oBig.style.transform = "rotate(0deg)";
                for (var i = 0; i < aBtn.length; i++) {
                    aBtn[i].style.left = 0;
                    aBtn[i].style.top = 0;
                    aBtn[i].style.transform = "scale(1) rotate(0deg)";
                }
                oBig.zhanKai = false;
            }
        }
        for (var i = 0; i < aBtn.length; i++) {
            aBtn[i].onmouseenter = function() {
                this.style.transition = 'all 1.5s';
                this.style.transform = 'scale(1.5) rotate(0deg)';
            };
            aBtn[i].onmouseout = function() {
                this.style.transform = "scale(1) rotate(360deg)";
            };
        }
    };
    </script>
</head>

<body>
    <section>
        <article>
            <div class="btn"></div>
            <div class="btn"></div>
            <div class="btn"></div>
            <div class="btn"></div>
            <div class="btn"></div>
            <div class="btn"></div>
            <div class="btn"></div>
            <div class="btn"></div>
        </article>
        <aside id="bigBtn"></aside>
    </section>
</body>

</html>
