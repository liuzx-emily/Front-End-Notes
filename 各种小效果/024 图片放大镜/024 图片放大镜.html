<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <title>图片放大镜效果</title>
    <style>
    .smallPic {
        width: 250px;
        position: relative;
    }
    
    .smallPic img {
        width: 100%;
        vertical-align: top;
    }
    
    .magnifier {
        position: absolute;
        left: 0;
        top: 0;
        width: 50px;
        height: 50px;
        background-color: black;
        filter: alpha(opacity=50);
        opacity: 0.5;
        display: none;
    }
    
    .bigPic {
        width: 200px;
        height: 200px;
        position: absolute;
        left: 400px;
        top: 50px;
        overflow: hidden;
    }
    
    .bigPic img {
        width: 800px;
        position: absolute;
        left: 0;
        top: 0;
        vertical-align: top;
    }
    </style>
</head>

<body>
    <div class="smallPic">
        <img src="13.jpg" alt="沙滩美景小图">
        <div class="magnifier"></div>
    </div>
    <div class="bigPic"><img src="13.jpg" alt="沙滩美景大图"></div>
    <script>
    var oSmall = document.getElementsByClassName('smallPic')[0];
    var oImgSmall = oSmall.getElementsByTagName('img')[0];
    var oMagnifier = document.getElementsByClassName('magnifier')[0];
    var oBig = document.getElementsByClassName('bigPic')[0];
    var oImgBig = oBig.getElementsByTagName('img')[0];
    oSmall.onmouseenter = function(ev) {
        ev = ev || window.event;
        oMagnifier.style.display = 'block';
    };
    oSmall.onmouseleave = function(ev) {
        ev = ev || window.event;
        oMagnifier.style.display = 'none';
    };
    oSmall.onmousemove = function(ev) {
        ev = ev || window.event;
        var L = ev.clientX - oSmall.offsetLeft - oMagnifier.offsetWidth / 2;
        var T = ev.clientY - oSmall.offsetTop - oMagnifier.offsetHeight / 2;
        if (L < 0) {
            L = 0;
        } else if (L > oSmall.offsetWidth - oMagnifier.offsetWidth) {
            L = oSmall.offsetWidth - oMagnifier.offsetWidth;
        }
        if (T < 0) {
            T = 0;
        } else if (T > oSmall.offsetHeight - oMagnifier.offsetHeight) {
            T = oSmall.offsetHeight - oMagnifier.offsetHeight;
        }
        oMagnifier.style.left = L + 'px';
        oMagnifier.style.top = T + 'px';

        var scaleX = L / (oSmall.offsetWidth - oMagnifier.offsetWidth);
        var scaleY = T / (oSmall.offsetHeight - oMagnifier.offsetHeight);
        oImgBig.style.left = scaleX * (oBig.offsetWidth - oImgBig.offsetWidth) + 'px';
        oImgBig.style.top = scaleY * (oBig.offsetHeight - oImgBig.offsetHeight) + 'px';
    };
    </script>
</body>

</html>
