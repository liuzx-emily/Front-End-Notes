<!DOCTYPE html>
<html lang="en">

<head>
    <!--IE下不能用-->
    <meta charset="UTF-8">
    <title>作业3 弹幕墙</title>
    <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <script>
    $(document).ready(function() {
        $(":submit").click(f);
        $(":button").click(function() {
            $(".danmutiao").hide();
        });

        function f() {
            var dm = $("#DanMu").val();
            var randSpeed = speed(dm.length);
            var randyPosition = (Math.floor(Math.random() * 90)) + "%";

            var txt = "<span class='danmutiao' style='right:0;top:" + randyPosition + ";'>" + dm + "</span>";
            $("#showDanMu").append(txt);
            $(".danmutiao").animate({
                left: 0
            }, randSpeed, function() {
                $(this).hide();
            });
        }

        function speed(len) {
            if (len <= 5)
                return 4000;
            else {
                return 20000 / len;
            }
        }

    });
    </script>
    <style>
    body {
        background-color: #eee;
        margin: 0;
        padding: 0;
    }
    
    #showDanMu {
        color: white;
        font-family: "幼圆";
        overflow: hidden;
        background-color: #4369B0;
        width: 700px;
        margin: 30px auto;
        height: 400px;
        font-size: 20px;
        position: relative;
        border-color: #4369B0 #2B3C67 #2B3C67 #4369B0;
        border-width: 5px;
        border-style: solid;
        border-radius: 50px;
        box-shadow: 10px 10px 10px #2B3C67;
    }
    
    .in {
        text-align: center;
    }
    
    .in * {
        font-size: 30px;
        padding: 10px;
        margin: 10px;
        color: white;
        font-family: "幼圆";
        overflow: hidden;
        background-color: #32B895;
        font-size: 20px;
        position: relative;
        border: #25836A 5px solid;
        border-radius: 10px;
        box-shadow: 5px 5px 10px #25836A;
    }
    
    .danmutiao {
        position: absolute;
    }
    
    #DanMu {
        background-color: #C3EEE2;
        color: black;
    }
    </style>
</head>

<body>
    <div id="showDanMu">
    </div>
    <div class="in">
        <input type="text" id="DanMu" placeholder="请输入弹幕" value="我最喜欢看银魂了！" required>
        <input type="submit" value="提交">
        <button type="button">清屏</button>
    </div>
</body>

</html>
