<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>面向对象的拖拽</title>
    <style>
    div {
        position: absolute;
        width: 100px;
        height: 100px;
        border-radius: 20%;
    }
    
    #div1 {
        left: 200px;
        top: 150px;
        background-color: coral;
    }
    
    #div2 {
        left: 10px;
        top: 50px;
        background-color: lightcoral;
    }
    </style>
    <script>
    function Drag() {
        this.obj = null;
        this.disX = 0;
        this.disY = 0;
        this.settings = { //默认参数
            toDown: function() {},
            toMove: function() {},
            toUp: function() {},
        };
    }
    Drag.prototype.init = function(opt) {
        this.obj = document.getElementById(opt.id);
        extend(this.settings, opt);
        var This = this;
        this.obj.onmousedown = function(ev) {
            ev = ev || window.event;
            This.fnDown(ev);
            This.settings.toDown(This.obj);

        };
    };
    Drag.prototype.fnDown = function(ev) {
        this.disX = ev.clientX - this.obj.offsetLeft;
        this.disY = ev.clientY - this.obj.offsetTop;
        var This = this;
        document.onmousemove = function(ev) {
            ev = ev || window.event;
            This.fnMove(ev);
            This.settings.toMove(This.obj);
            return false;
        };
        document.onmouseup = function() {
            This.fnUp();
            This.settings.toUp(This.obj);
        };
    };
    Drag.prototype.fnMove = function(ev) {
        var L = ev.clientX - this.disX;
        var T = ev.clientY - this.disY;
        this.obj.style.left = L + 'px';
        this.obj.style.top = T + 'px';
    };
    Drag.prototype.fnUp = function() {
        document.onmousemove = document.onmouseup = null;
    };

    function extend(obj1, obj2) {
        for (var attr in obj2) {
            obj1[attr] = obj2[attr];
        }
    }
    </script>
</head>

<body>
    <div id="div1">11111</div>
    <div id="div2">22222</div>
    <script>
    var d1 = new Drag();
    d1.init({
        id: 'div1'

    });
    var d2 = new Drag();
    d2.init({
        id: 'div2',
        toMove: function(obj) {
            obj.style.backgroundColor = 'lightcyan';
        },
        toUp: function(obj) {
            obj.style.backgroundColor = 'lightcoral';
        }
    });
    </script>
</body>

</html>
