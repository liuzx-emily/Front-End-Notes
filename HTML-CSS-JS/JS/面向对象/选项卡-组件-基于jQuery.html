<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <title>选项卡-组件开发-基于jQuery</title>
    <style>
    .out {
        display: inline-block;
        width: 200px;
        vertical-align: top;
    }
    
    .out input.active {
        background-color: #bac;
    }
    
    .out div {
        height: 150px;
        border: 1px dashed coral;
        display: none;
    }
    </style>
    <script src="../../../其他资源/jquery-3.2.0.min.js"></script>
    <script>
    function Tab(index) {
        this.oParent = $('div.out').eq(index);
        this.aInput = this.oParent.children('input');
        this.aDiv = this.oParent.children('div');
        this.timer = null; //延迟功能的定时器
        this.iNow = 0;
        this.settings = {
            event: 'click',
            startIndex: 0,
            delay: 0
        };
    }
    Tab.prototype.init = function(opt) {
        $.extend(this.settings, opt);
        this.iNow = this.settings.startIndex;
        this.change();
        //给input添加点击事件
        var This = this;
        this.aInput.on(this.settings.event, function() {

            $(This).trigger('beforeClick');
            if (This.settings.event == 'mouseover' && This.settings.delay) {
                This.timer = setTimeout(function(index) {
                    This.iNow = index;
                    This.change();
                    $(this).trigger('afterClick');
                }, This.settings.delay, $(this).index());
                $(this).on('mouseout', function() {
                    clearTimeout(This.timer);
                });
            } else {
                This.iNow = $(this).index();
                This.change();
                $(This).trigger('afterClick');
            }
        });

    };
    Tab.prototype.change = function() {
        this.aInput.removeClass("active");
        this.aDiv.css('display', 'none');

        this.aInput.eq(this.iNow).addClass("active");
        this.aDiv.eq(this.iNow).css('display', 'block');

    };
    Tab.prototype.getContent = function() {
        alert(this.aDiv.eq(this.iNow).text());
    };
    </script>
</head>

<body>
    <div class="out">
        <input type="button" value='哈哈' class="active">
        <input type="button" value='魔法'>
        <input type="button" value='啦啦'>
        <div>坂田银时 click 方法</div>
        <div>桂小太郎 click 方法</div>
        <div>土方十四郎 click 方法</div>
    </div>
    <div class="out">
        <input type="button" value='哈哈' class="active">
        <input type="button" value='魔法'>
        <input type="button" value='啦啦'>
        <div>坂田银时 mouseover 无延时</div>
        <div>桂小太郎 mouseover 无延时</div>
        <div>土方十四郎 mouseover 无延时</div>
    </div>
    <div class="out">
        <input type="button" value='哈哈'>
        <input type="button" value='魔法'>
        <input type="button" value='啦啦'>
        <div>坂田银时 mouseover 有延时</div>
        <div>桂小太郎 mouseover 有延时</div>
        <div>土方十四郎 mouseover 有延时</div>
    </div>
    <div class="out">
        <input type="button" value='哈哈'>
        <input type="button" value='魔法'>
        <input type="button" value='啦啦'>
        <div>坂田银时 click 自定义事件</div>
        <div>桂小太郎 click 自定义事件</div>
        <div>土方十四郎 click 自定义事件</div>
    </div>
    <br>
    <input type="button" value='弹出第一个块中的当前内容' id='a'>
    <script>
    var t1 = new Tab(0);
    t1.init();
    a.onclick = $.proxy(t1.getContent, t1);
    var t2 = new Tab(1);
    t2.init({
        event: 'mouseover'
    });
    var t3 = new Tab(2);
    t3.init({
        event: 'mouseover',
        delay: 200
    });
    var t4 = new Tab(3);
    t4.init();
    $(t4).on('beforeClick', t4.getContent);
    $(t4).on('afterClick', t4.getContent);
    </script>
</body>

</html>
